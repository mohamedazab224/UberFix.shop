# ๐ ูููู ุงููุดุฑูุน - UberFix

## ๐๏ธ ุงููููุงุช ูุงููุฌูุฏุงุช ุงูุฑุฆูุณูุฉ

### ๐ ูููุงุช ุงูุฌุฐุฑ
```
uberfix/
โโโ README.md                    # ุงูุฏููู ุงูุฑุฆูุณู ูููุดุฑูุน
โโโ ADMIN_SETUP.md              # ุฏููู ุฅุนุฏุงุฏ ุงููุณุคูููู
โโโ PROJECT_STRUCTURE.md        # ูุฐุง ุงูููู - ุดุฑุญ ูููู ุงููุดุฑูุน
โโโ package.json                # ุชุจุนูุงุช ุงููุดุฑูุน
โโโ pnpm-workspace.yaml         # ุฅุนุฏุงุฏุงุช pnpm workspace
โโโ tsconfig.json               # ุฅุนุฏุงุฏุงุช TypeScript
โโโ vite.config.ts              # ุฅุนุฏุงุฏุงุช Vite
โโโ tailwind.config.ts          # ุฅุนุฏุงุฏุงุช Tailwind CSS
โโโ components.json             # ุฅุนุฏุงุฏุงุช Shadcn/ui
โโโ .env                        # ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ (ุบูุฑ ููุฏุฑุฌ ูู Git)
```

### ๐ `src/` - ููุฏ ุงููุงุฌูุฉ ุงูุฃูุงููุฉ

```
src/
โโโ main.tsx                    # ููุทุฉ ุงูุฏุฎูู ุงูุฑุฆูุณูุฉ
โโโ App.tsx                     # ุงููููู ุงูุฑุฆูุณู
โโโ index.css                   # ุงูุฃููุงุท ุงูุนุงูุฉ
โ
โโโ components/                 # ููููุงุช React ุงููุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู
โ   โโโ ui/                    # ููููุงุช Shadcn/ui ุงูุฃุณุงุณูุฉ
โ   โ   โโโ button.tsx
โ   โ   โโโ card.tsx
โ   โ   โโโ dialog.tsx
โ   โ   โโโ form.tsx
โ   โ   โโโ input.tsx
โ   โ   โโโ ...
โ   โ
โ   โโโ layout/                # ููููุงุช ุงูุชุฎุทูุท
โ   โ   โโโ Header.tsx
โ   โ   โโโ Footer.tsx
โ   โ   โโโ Sidebar.tsx
โ   โ   โโโ Navigation.tsx
โ   โ
โ   โโโ maintenance/           # ููููุงุช ุทูุจุงุช ุงูุตูุงูุฉ
โ   โ   โโโ RequestForm.tsx
โ   โ   โโโ RequestCard.tsx
โ   โ   โโโ RequestDetails.tsx
โ   โ
โ   โโโ appointments/          # ููููุงุช ุงูููุงุนูุฏ
โ   โ   โโโ AppointmentCard.tsx
โ   โ   โโโ AppointmentForm.tsx
โ   โ
โ   โโโ notifications/         # ููููุงุช ุงูุฅุดุนุงุฑุงุช
โ       โโโ NotificationBell.tsx
โ       โโโ NotificationList.tsx
โ
โโโ pages/                     # ุตูุญุงุช ุงูุชุทุจูู ุงูุฑุฆูุณูุฉ
โ   โโโ Index.tsx             # ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
โ   โโโ Login.tsx             # ุชุณุฌูู ุงูุฏุฎูู
โ   โโโ RoleSelection.tsx     # ุงุฎุชูุงุฑ ุงูุฏูุฑ
โ   โโโ Dashboard.tsx         # ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ
โ   โโโ CustomerDashboard.tsx # ููุญุฉ ุงูุนููุงุก
โ   โโโ TechnicianDashboard.tsx # ููุญุฉ ุงูููููู
โ   โโโ AdminDashboard.tsx    # ููุญุฉ ุงููุฏูุฑ
โ   โโโ Requests.tsx          # ุนุฑุถ ุงูุทูุจุงุช
โ   โโโ RequestDetails.tsx    # ุชูุงุตูู ุงูุทูุจ
โ   โโโ Appointments.tsx      # ุงูููุงุนูุฏ
โ   โโโ Invoices.tsx          # ุงูููุงุชูุฑ
โ   โโโ Settings.tsx          # ุงูุฅุนุฏุงุฏุงุช
โ   โโโ Documentation.tsx     # ุงูุชูุซูู
โ
โโโ hooks/                     # Custom React Hooks
โ   โโโ use-toast.ts          # ุฅุดุนุงุฑุงุช Toast
โ   โโโ use-mobile.tsx        # ุงูุชุดุงู ุงูุฃุฌูุฒุฉ ุงููุญูููุฉ
โ   โโโ useRequests.tsx       # ุฅุฏุงุฑุฉ ุงูุทูุจุงุช
โ   โโโ useNotifications.tsx  # ุฅุฏุงุฑุฉ ุงูุฅุดุนุงุฑุงุช
โ   โโโ useAuth.tsx           # ุงููุตุงุฏูุฉ ูุงูุชุฎููู
โ
โโโ integrations/              # ุงูุชูุงููุงุช ุงูุฎุงุฑุฌูุฉ
โ   โโโ supabase/
โ       โโโ client.ts         # ุนููู Supabase
โ       โโโ types.ts          # ุฃููุงุน TypeScript (ููููุฏุฉ ุชููุงุฆูุงู)
โ       โโโ hooks/            # Hooks ุฎุงุตุฉ ุจู Supabase
โ
โโโ lib/                       # ุฃุฏูุงุช ููุณุงุนุฏุงุช
โ   โโโ utils.ts              # ูุธุงุฆู ูุณุงุนุฏุฉ ุนุงูุฉ
โ
โโโ types/                     # ุชุนุฑููุงุช TypeScript
    โโโ index.ts              # ุงูุฃููุงุน ุงููุฎุตุตุฉ
```

### ๐ง `supabase/` - Backend ูุงููุธุงุฆู ุงูุฎุงุฏููุฉ

```
supabase/
โโโ config.toml                # ุฅุนุฏุงุฏุงุช Supabase
โ
โโโ functions/                 # Edge Functions (Deno)
โ   โโโ send-email-notification/
โ   โ   โโโ index.ts          # ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุงูุจุฑูุฏ
โ   โ
โ   โโโ send-approval-email/
โ   โ   โโโ index.ts          # ุฅุฑุณุงู ุทูุจุงุช ุงูููุงููุฉ
โ   โ
โ   โโโ send-invoice-email/
โ   โ   โโโ index.ts          # ุฅุฑุณุงู ุงูููุงุชูุฑ
โ   โ
โ   โโโ sla-monitor/
โ   โ   โโโ index.ts          # ูุฑุงูุจุฉ SLA ุงูุชููุงุฆูุฉ
โ   โ
โ   โโโ _shared/               # ูููุงุช ูุดุชุฑูุฉ
โ       โโโ cors.ts           # ุฅุนุฏุงุฏุงุช CORS
โ       โโโ email-templates/  # ููุงูุจ React Email
โ           โโโ maintenance-notification.tsx
โ           โโโ approval-request.tsx
โ           โโโ invoice-email.tsx
โ
โโโ migrations/                # ูููุงุช ุชุฑุญูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
    โโโ 001_db_schema.sql     # ุงููููู ุงูุฃุณุงุณู (ูุฑุฌุนู)
    โโโ 20250110_*.sql        # ูููุงุช ุงูุชุฑุญูู ุจุงูุชุฑุชูุจ
    โโโ ...                   # (ูููุฑุงุกุฉ ููุท - ูุง ุชุนุฏูู ูุฏููุงู)
```

### ๐ `docs/` - ุงูุชูุซูู ุงูุฅุถุงูู

```
docs/
โโโ ADMIN_SETUP.md             # ุฏููู ุฅุนุฏุงุฏ ุงููุณุคูููู (ููุณุฎ ููุฌุฐุฑ)
โโโ [ูููุงุช ูุฏููุฉ ูุญุฐููุฉ]      # ุชู ุงูุชูุธูู
```

### ๐ `public/` - ุงููููุงุช ุงูุซุงุจุชุฉ

```
public/
โโโ favicon.ico                # ุฃููููุฉ ุงููููุน
โโโ placeholder.svg            # ุตูุฑุฉ ุงุญุชูุงุทูุฉ
โโโ [ุฃุตูู ุฃุฎุฑู]               # ุตูุฑุ ุฃููููุงุชุ ุฅูุฎ
```

## ๐ ูุงุนุฏุฉ ุงูุจูุงูุงุช - ุงูุฌุฏุงูู ุงูุฑุฆูุณูุฉ

### ๐ค ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
- `auth.users` - ุฌุฏูู Supabase ูููุตุงุฏูุฉ (ููุฏุงุฑ ุชููุงุฆูุงู)
- `profiles` - ูุนูููุงุช ุงููุณุชุฎุฏููู ุงูุฅุถุงููุฉ
- `user_roles` - ุฃุฏูุงุฑ ุงููุณุชุฎุฏููู (customer, technician, admin)

### ๐ง ุทูุจุงุช ุงูุตูุงูุฉ
- `maintenance_requests` - ุงูุทูุจุงุช ุงูุฑุฆูุณูุฉ
- `request_lines` - ุจููุฏ ุงูุทูุจุงุช ูุงูุฃุณุนุงุฑ
- `request_events` - ุณุฌู ุงูุฃุญุฏุงุซ ูุงูุชุบููุฑุงุช
- `request_lifecycle` - ุฏูุฑุฉ ุญูุงุฉ ุงูุทูุจ

### ๐ ุงูููุงุนูุฏ ูุงูุฌุฏููุฉ
- `appointments` - ุงูููุงุนูุฏ ุงููุญุฌูุฒุฉ
- `vendor_locations` - ููุงูุน ุงูููููู

### ๐ข ุงูุฌูุงุช ูุงูููููู
- `vendors` - ููุฏูู ุงูุฎุฏูุฉ ูุงูููููู
- `companies` - ุงูุดุฑูุงุช
- `branches` - ุงููุฑูุน

### ๐ฐ ุงููุงููุฉ
- `invoices` - ุงูููุงุชูุฑ
- `invoice_items` - ุจููุฏ ุงูููุงุชูุฑ
- `payments` - ุงููุฏููุนุงุช

### ๐ ุงูุฅุดุนุงุฑุงุช
- `notifications` - ุฅุดุนุงุฑุงุช ุฏุงุฎู ุงูุชุทุจูู
- `sla_policies` - ุณูุงุณุงุช SLA
- `sla_violations` - ุงูุชูุงูุงุช SLA

### ๐ ุงูุจูุงูุงุช ุงููุฑุฌุนูุฉ
- `categories` - ุชุตูููุงุช ุงูุฎุฏูุงุช
- `services` - ุงูุฎุฏูุงุช ุงููุชุงุญุฉ
- `properties` - ุงูุนูุงุฑุงุช

### ๐ ุงูุชุฏููู ูุงูุฃูุงู
- `audit_logs` - ุณุฌู ุฌููุน ุงูุนูููุงุช
- `app_settings` - ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู

## ๐ ุงูุฃูุงู - Row Level Security (RLS)

### โ ุงูุฌุฏุงูู ุงููุญููุฉ ุจู RLS
```sql
-- ูุซุงู: profiles
- ุงูุณูุงุญ ูููุณุชุฎุฏููู ุจุฑุคูุฉ ูููุงุชูู ุงูุดุฎุตูุฉ
- ุงูุณูุงุญ ูููุณุคูููู ุจุฑุคูุฉ ุฌููุน ุงููููุงุช

-- ูุซุงู: maintenance_requests
- ุงูุนููุงุก: ุฑุคูุฉ ุทูุจุงุชูู ููุท
- ุงูููููู: ุฑุคูุฉ ุงูุทูุจุงุช ุงููุฎุตุตุฉ ููู
- ุงููุฏูุฑูู: ุฑุคูุฉ ุฌููุน ุงูุทูุจุงุช
```

### ๐ ุงููุธุงุฆู ุงูุฃูููุฉ
- `has_role(user_id, role)` - ุงูุชุญูู ูู ุงูุฃุฏูุงุฑ
- `is_admin()` - ุงูุชุญูู ูู ุตูุงุญูุงุช ุงููุฏูุฑ
- `is_staff()` - ุงูุชุญูู ูู ุงูููุธููู

## ๐ Edge Functions - ุฏููู ุณุฑูุน

### ๐ง `send-email-notification`
**ุงูุบุฑุถ**: ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุจุฑูุฏ ุฅููุชุฑููู ููุนููุงุก ูุงูููููู

**ุงููุนุงููุงุช**:
```typescript
{
  recipient_email: string
  recipient_name: string
  notification_type: 'request_created' | 'status_update' | 'vendor_assigned' | 'request_completed'
  request_id: string
  request_title: string
  request_status?: string
  vendor_name?: string
  notes?: string
}
```

### โ `send-approval-email`
**ุงูุบุฑุถ**: ุฅุฑุณุงู ุทูุจุงุช ุงูููุงููุฉ ูููุณุคูููู

**ุงููุนุงููุงุช**:
```typescript
{
  approver_email: string
  approver_name: string
  request_id: string
  request_title: string
  requester_name: string
  request_details: string
}
```

### ๐ฐ `send-invoice-email`
**ุงูุบุฑุถ**: ุฅุฑุณุงู ุงูููุงุชูุฑ ููุนููุงุก

**ุงููุนุงููุงุช**:
```typescript
{
  customer_email: string
  invoice: {
    invoice_number: string
    customer_name: string
    total_amount: number
    items: Array<{...}>
    // ... ุงููุฒูุฏ
  }
}
```

### โฐ `sla-monitor`
**ุงูุบุฑุถ**: ูุฑุงูุจุฉ ุชููุงุฆูุฉ ูุงูุชูุงูุงุช SLA (ูุนูู ุจุดูู ุฏูุฑู)

**ูุง ูุชุทูุจ ูุนุงููุงุช** - ูุชู ุชุดุบููู ุชููุงุฆูุงู ุนุจุฑ Cron Job

## ๐ฆ ุงูุชุจุนูุงุช ุงูุฑุฆูุณูุฉ

### Frontend
- `react` & `react-dom` - ุงูููุชุจุฉ ุงูุฃุณุงุณูุฉ
- `@tanstack/react-query` - ุฅุฏุงุฑุฉ ุญุงูุฉ ุงูุฎุงุฏู
- `react-router-dom` - ุงูุชูุฌูู
- `@supabase/supabase-js` - ุนููู Supabase
- `tailwindcss` - ุฃุทุฑ CSS
- `lucide-react` - ุงูุฃููููุงุช
- `react-hook-form` + `zod` - ุงูููุงุฐุฌ ูุงูุชุญูู

### Backend (Edge Functions)
- `@supabase/supabase-js` (Deno)
- `npm:resend` - ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- `npm:twilio` - ุงูุฑุณุงุฆู ุงููุตูุฉ
- `npm:react` & `npm:@react-email/*` - ููุงูุจ ุงูุจุฑูุฏ

## ๐ง ููุงุญุธุงุช ูููุฉ ูููุทูุฑูู

### โ๏ธ ูููุงุช ูููุฑุงุกุฉ ููุท
```
โ ูุง ุชุนุฏูู ูุฐู ุงููููุงุช:
- src/integrations/supabase/types.ts (ููููุฏ ุชููุงุฆูุงู)
- supabase/migrations/* (ููุฏุงุฑ ุนุจุฑ Supabase CLI)
- package.json (ุงุณุชุฎุฏู lov-add-dependency / lov-remove-dependency)
```

### โ ุฃูุถู ุงูููุงุฑุณุงุช
1. **ุงูููููุงุช**: ุงุญุชูุธ ุจูุง ุตุบูุฑุฉ ููุฑูุฒุฉ
2. **Hooks**: ุงููู ุงูููุทู ุงููุนูุฏ ุฅูู custom hooks
3. **ุงูุฃููุงุท**: ุงุณุชุฎุฏู ูุธุงู ุงูุชุตููู ูู `index.css` ู `tailwind.config.ts`
4. **ุงูุฃููุงุน**: ุงุณุชุฎุฏู TypeScript ุจุดูู ุตุงุฑู
5. **RLS**: ุงุฎุชุจุฑ ุณูุงุณุงุช RLS ุจุนูุงูุฉ
6. **Edge Functions**: ุณุฌูู ุงูุฃุฎุทุงุก ุจูุถูุญ

### ๐จ ูุธุงู ุงูุชุตููู
```typescript
// ุงุณุชุฎุฏู ุงููุชุบูุฑุงุช ุงูุฏูุงููุฉ ูู index.css:
'bg-primary'        // #f5bf23 (ุงูุฃุตูุฑ)
'bg-secondary'      // #111 (ุงูุฃุณูุฏ)
'bg-background'     // #fff (ุงูุฃุจูุถ)
'text-foreground'   // ุงููุต ุงูุฃุณุงุณู

// โ ูุง ุชุณุชุฎุฏู ุฃููุงู ูุจุงุดุฑุฉ:
'bg-[#f5bf23]'     // ุฎุทุฃ!
'text-white'       // ุฎุทุฃ! (ุงุณุชุฎุฏู text-background ุฃู text-foreground)
```

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

- ๐ ุฑุงุฌุน `README.md` ููุจุฏุก ุงูุณุฑูุน
- ๐จโ๐ผ ุฑุงุฌุน `ADMIN_SETUP.md` ูุฅุนุฏุงุฏ ุงููุณุคูููู
- ๐ ุฒูุฑ [Supabase Docs](https://supabase.com/docs)
- ๐ฌ ุงูุถู ุฅูู [Discord](https://discord.com/channels/1119885301872070706)

---

**ุขุฎุฑ ุชุญุฏูุซ**: 2025-01-10
